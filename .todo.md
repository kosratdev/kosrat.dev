# Courses Feature Todo List

This file tracks the implementation of the "Courses" feature as specified in `fr-specs.md`.

## 1. Content Structure and Management

- [x] Create a new content collection for courses in `src/content/courses`.
- [x] Define the schema for courses, sections, and lessons, including fields for title, cover image, description, level (Beginner, Intermediate, Advanced), and category.
- [x] Set up content structure for courses with proper hierarchy (courses → sections → lessons).
- [x] Create sample course content to test the implementation.

## 2. Feature Entry Points

- [x] Add a "Courses" link to the main navigation menu (`src/components/Navbar.astro`) between "Home" and "Archive".
- [x] Create a new "Courses" card in the sidebar (`src/components/widget/Courses.astro`) that lists available courses.
- [ ] Implement functionality to "pin" a course to the top of the main post list on the home page for increased visibility.

## 3. Courses List Page (`/courses`)

- [x] Create a new page at `/courses` to display all available courses.
- [x] Adapt the existing `src/components/PostCard.astro` to create a `CourseCard.astro` component for the courses list.
- [x] The course card should display:
  - [x] Title
  - [x] Cover image
  - [x] Description
  - [x] Level (Beginner, Intermediate, Advanced)
  - [x] Category
  - [x] Total number of lessons
  - [x] "Start Course" or "Continue" button (based on progress from localStorage).

## 4. Course Detail Page (`/courses/[course-slug]`)

- [ ] Create a dynamic route for course detail pages.
- [ ] Display course information at the top:
  - [ ] Course name and metadata
  - [ ] "Reset Progress" button
- [ ] Implement course sections display:
  - [ ] Show sections as collapsible accordion elements
  - [ ] Clicking a section title toggles its collapsed/expanded state
  - [ ] Add check marks to indicate completed sections
  - [ ] Add check marks to indicate completed lessons within sections
  - [ ] Clicking a lesson title navigates to the lesson content

## 5. Lesson Content Page (`/courses/[course-slug]/[section-slug]/[lesson-slug]`)

- [ ] Create dynamic route for individual lesson pages.
- [ ] Display course and section info at the top of the page.
- [ ] Render lesson content using the existing `PostPage.astro` component structure.
- [ ] Implement lesson navigation:
  - [ ] Add "Next" and "Previous" buttons at the bottom of each lesson
  - [ ] First lesson of first section: no "Previous" button
  - [ ] Last lesson of last section: "Finish" button instead of "Next"
  - [ ] Middle lessons: both "Previous" and "Next" buttons
- [ ] Implement progress tracking:
  - [ ] Use `localStorage` to track lesson completion on a per-browser basis
  - [ ] Mark current lesson as completed when clicking "Next"
  - [ ] Persist progress across browser sessions
  - [ ] Handle progress state for "Start Course" vs "Continue" buttons

## 6. Progress Management

- [ ] Create utility functions for localStorage-based progress tracking:
  - [ ] `getCourseProgress(courseSlug)` - get completion status for all lessons
  - [ ] `markLessonCompleted(courseSlug, lessonSlug)` - mark a lesson as completed
  - [ ] `resetCourseProgress(courseSlug)` - reset all progress for a course
  - [ ] `getLastViewedLesson(courseSlug)` - get the last lesson viewed in a course
- [ ] Implement progress indicators:
  - [ ] Course card progress (completed lessons / total lessons)
  - [ ] Section completion indicators
  - [ ] Individual lesson completion checkmarks

## 7. Existing Feature Integration

- [ ] Update the Archive page (`src/pages/archive.astro`):
  - [ ] Include lessons in the timeline alongside posts
  - [ ] Add content type labels ("Post" or "Lesson") to differentiate items
  - [ ] Maintain chronological ordering based on publication date
- [ ] Update global search functionality (`src/components/Search.svelte`):
  - [ ] Include course content in search results
  - [ ] Include lesson content in search results
  - [ ] Add appropriate search result formatting for course content

## 8. UI/UX Enhancements

- [ ] Ensure responsive design for all course-related pages
- [ ] Implement proper loading states for course content
- [ ] Add proper error handling for missing courses/lessons
- [ ] Ensure accessibility compliance for accordion sections and navigation
- [ ] Test mobile experience for collapsible sections and lesson navigation

## 9. SEO and Performance

- [ ] Implement proper meta tags for course and lesson pages
- [ ] Set up structured data for educational content
- [ ] Optimize course content for search engines
- [ ] Ensure proper URL structure for courses (`/courses/course-slug/section-slug/lesson-slug`)

## 10. Testing and Validation

- [ ] Create comprehensive test course content
- [ ] Test progress tracking functionality across different browsers
- [ ] Validate navigation flow through entire course
- [ ] Test integration with existing blog functionality
- [ ] Verify search functionality includes course content
